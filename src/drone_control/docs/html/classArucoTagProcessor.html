<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Drone Control System: ArucoTagProcessor Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Drone Control System
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classArucoTagProcessor-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ArucoTagProcessor Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>ArUco标记处理器类  
 <a href="classArucoTagProcessor.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="ArucoTagProcessor_8h_source.html">ArucoTagProcessor.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for ArucoTagProcessor:</div>
<div class="dyncontent">
<div class="center"><img src="classArucoTagProcessor__coll__graph.png" border="0" usemap="#ArucoTagProcessor_coll__map" alt="Collaboration graph"/></div>
<map name="ArucoTagProcessor_coll__map" id="ArucoTagProcessor_coll__map">
<area shape="rect" title="ArUco标记处理器类" alt="" coords="44,351,251,765"/>
<area shape="rect" href="structArucoTag.html" title="ArUco标记结构体" alt="" coords="5,93,113,200"/>
<area shape="rect" href="structTagConfig.html" title="标记配置结构体" alt="" coords="137,5,333,288"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab247bff9d180ac87924120c2e81e3d06"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArucoTagProcessor.html#ab247bff9d180ac87924120c2e81e3d06">ArucoTagProcessor</a> (ros::NodeHandle &amp;nh, const <a class="el" href="structTagConfig.html">TagConfig</a> tag_config)</td></tr>
<tr class="memdesc:ab247bff9d180ac87924120c2e81e3d06"><td class="mdescLeft">&#160;</td><td class="mdescRight">构造函数  <a href="classArucoTagProcessor.html#ab247bff9d180ac87924120c2e81e3d06">More...</a><br /></td></tr>
<tr class="separator:ab247bff9d180ac87924120c2e81e3d06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a584fafed502cd5fa21691c1cbcf11250"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArucoTagProcessor.html#a584fafed502cd5fa21691c1cbcf11250">~ArucoTagProcessor</a> ()</td></tr>
<tr class="memdesc:a584fafed502cd5fa21691c1cbcf11250"><td class="mdescLeft">&#160;</td><td class="mdescRight">析构函数  <a href="classArucoTagProcessor.html#a584fafed502cd5fa21691c1cbcf11250">More...</a><br /></td></tr>
<tr class="separator:a584fafed502cd5fa21691c1cbcf11250"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e6c730d582983b6674945b6cecce1f7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArucoTagProcessor.html#a2e6c730d582983b6674945b6cecce1f7">set_start</a> (bool started)</td></tr>
<tr class="memdesc:a2e6c730d582983b6674945b6cecce1f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">设置处理器启动状态  <a href="classArucoTagProcessor.html#a2e6c730d582983b6674945b6cecce1f7">More...</a><br /></td></tr>
<tr class="separator:a2e6c730d582983b6674945b6cecce1f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08383d557a51c32c36fcf05b2038f10a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArucoTagProcessor.html#a08383d557a51c32c36fcf05b2038f10a">update_and_log_validity</a> ()</td></tr>
<tr class="memdesc:a08383d557a51c32c36fcf05b2038f10a"><td class="mdescLeft">&#160;</td><td class="mdescRight">更新并记录标记有效性  <a href="classArucoTagProcessor.html#a08383d557a51c32c36fcf05b2038f10a">More...</a><br /></td></tr>
<tr class="separator:a08383d557a51c32c36fcf05b2038f10a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae28e867f42494a6d8a2e3cd18a8f83ad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArucoTagProcessor.html#ae28e867f42494a6d8a2e3cd18a8f83ad">update_tagconfig</a> (const <a class="el" href="structTagConfig.html">TagConfig</a> config)</td></tr>
<tr class="memdesc:ae28e867f42494a6d8a2e3cd18a8f83ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">更新标记配置  <a href="classArucoTagProcessor.html#ae28e867f42494a6d8a2e3cd18a8f83ad">More...</a><br /></td></tr>
<tr class="separator:ae28e867f42494a6d8a2e3cd18a8f83ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a9fde3188baf0caa7ec72ffc3bf3443"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArucoTagProcessor.html#a4a9fde3188baf0caa7ec72ffc3bf3443">update_tag_started</a> (const bool started)</td></tr>
<tr class="memdesc:a4a9fde3188baf0caa7ec72ffc3bf3443"><td class="mdescLeft">&#160;</td><td class="mdescRight">更新标记启动状态  <a href="classArucoTagProcessor.html#a4a9fde3188baf0caa7ec72ffc3bf3443">More...</a><br /></td></tr>
<tr class="separator:a4a9fde3188baf0caa7ec72ffc3bf3443"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54b70e6de83233fd0a85fe5256c440a6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArucoTagProcessor.html#a54b70e6de83233fd0a85fe5256c440a6">is_valid</a> () const</td></tr>
<tr class="memdesc:a54b70e6de83233fd0a85fe5256c440a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">检查标记是否有效  <a href="classArucoTagProcessor.html#a54b70e6de83233fd0a85fe5256c440a6">More...</a><br /></td></tr>
<tr class="separator:a54b70e6de83233fd0a85fe5256c440a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcc21c5619797a337d1f70290d1e506f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArucoTagProcessor.html#adcc21c5619797a337d1f70290d1e506f">is_aligned</a> () const</td></tr>
<tr class="memdesc:adcc21c5619797a337d1f70290d1e506f"><td class="mdescLeft">&#160;</td><td class="mdescRight">检查标记是否已对准  <a href="classArucoTagProcessor.html#adcc21c5619797a337d1f70290d1e506f">More...</a><br /></td></tr>
<tr class="separator:adcc21c5619797a337d1f70290d1e506f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e39474344ea5589188d750b5e24a78a"><td class="memItemLeft" align="right" valign="top">std::array&lt; double, 4 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArucoTagProcessor.html#a1e39474344ea5589188d750b5e24a78a">get_alignment_errors</a> () const</td></tr>
<tr class="memdesc:a1e39474344ea5589188d750b5e24a78a"><td class="mdescLeft">&#160;</td><td class="mdescRight">获取对齐误差向量  <a href="classArucoTagProcessor.html#a1e39474344ea5589188d750b5e24a78a">More...</a><br /></td></tr>
<tr class="separator:a1e39474344ea5589188d750b5e24a78a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06e20fde1499c5c3b8a767379190e71c"><td class="memItemLeft" align="right" valign="top">std::array&lt; double, 4 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArucoTagProcessor.html#a06e20fde1499c5c3b8a767379190e71c">calculate_velocity_command</a> (bool is_yaw=true) const</td></tr>
<tr class="memdesc:a06e20fde1499c5c3b8a767379190e71c"><td class="mdescLeft">&#160;</td><td class="mdescRight">计算速度指令  <a href="classArucoTagProcessor.html#a06e20fde1499c5c3b8a767379190e71c">More...</a><br /></td></tr>
<tr class="separator:a06e20fde1499c5c3b8a767379190e71c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a07e1d1da2791953f47be1112c34635ec"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArucoTagProcessor.html#a07e1d1da2791953f47be1112c34635ec">target_pose_callback</a> (const geometry_msgs::PoseStamped::ConstPtr &amp;msg)</td></tr>
<tr class="memdesc:a07e1d1da2791953f47be1112c34635ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">目标位姿回调函数  <a href="classArucoTagProcessor.html#a07e1d1da2791953f47be1112c34635ec">More...</a><br /></td></tr>
<tr class="separator:a07e1d1da2791953f47be1112c34635ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cf4cd546795956a614fbec97eb5a04b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structArucoTag.html">ArucoTag</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArucoTagProcessor.html#a6cf4cd546795956a614fbec97eb5a04b">get_tag_body</a> (const <a class="el" href="structArucoTag.html">ArucoTag</a> &amp;tag_cam) const</td></tr>
<tr class="memdesc:a6cf4cd546795956a614fbec97eb5a04b"><td class="mdescLeft">&#160;</td><td class="mdescRight">将相机坐标系中的标记转换为机体坐标系  <a href="classArucoTagProcessor.html#a6cf4cd546795956a614fbec97eb5a04b">More...</a><br /></td></tr>
<tr class="separator:a6cf4cd546795956a614fbec97eb5a04b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab460550439913f709e8673cad3e0d127"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArucoTagProcessor.html#ab460550439913f709e8673cad3e0d127">check_tag_timeout</a> () const</td></tr>
<tr class="memdesc:ab460550439913f709e8673cad3e0d127"><td class="mdescLeft">&#160;</td><td class="mdescRight">检查标记是否超时  <a href="classArucoTagProcessor.html#ab460550439913f709e8673cad3e0d127">More...</a><br /></td></tr>
<tr class="separator:ab460550439913f709e8673cad3e0d127"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe7deb02d9d29837747d9a4e5349e216"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArucoTagProcessor.html#abe7deb02d9d29837747d9a4e5349e216">check_distance_valid</a> () const</td></tr>
<tr class="memdesc:abe7deb02d9d29837747d9a4e5349e216"><td class="mdescLeft">&#160;</td><td class="mdescRight">检查标记与目标的距离是否有效  <a href="classArucoTagProcessor.html#abe7deb02d9d29837747d9a4e5349e216">More...</a><br /></td></tr>
<tr class="separator:abe7deb02d9d29837747d9a4e5349e216"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf3d1fa5498ab780a8186adac557807d"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArucoTagProcessor.html#aaf3d1fa5498ab780a8186adac557807d">get_yaw_error_deg</a> () const</td></tr>
<tr class="memdesc:aaf3d1fa5498ab780a8186adac557807d"><td class="mdescLeft">&#160;</td><td class="mdescRight">获取偏航角误差（度）  <a href="classArucoTagProcessor.html#aaf3d1fa5498ab780a8186adac557807d">More...</a><br /></td></tr>
<tr class="separator:aaf3d1fa5498ab780a8186adac557807d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90eb16f0f62b260877263c3af29dc531"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArucoTagProcessor.html#a90eb16f0f62b260877263c3af29dc531">calculate_yaw_rate</a> () const</td></tr>
<tr class="memdesc:a90eb16f0f62b260877263c3af29dc531"><td class="mdescLeft">&#160;</td><td class="mdescRight">计算偏航角速度指令  <a href="classArucoTagProcessor.html#a90eb16f0f62b260877263c3af29dc531">More...</a><br /></td></tr>
<tr class="separator:a90eb16f0f62b260877263c3af29dc531"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a86fc16595788f9e950c5084ce28fec66"><td class="memItemLeft" align="right" valign="top">ros::NodeHandle&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArucoTagProcessor.html#a86fc16595788f9e950c5084ce28fec66">_nh</a></td></tr>
<tr class="memdesc:a86fc16595788f9e950c5084ce28fec66"><td class="mdescLeft">&#160;</td><td class="mdescRight">ROS节点句柄  <a href="classArucoTagProcessor.html#a86fc16595788f9e950c5084ce28fec66">More...</a><br /></td></tr>
<tr class="separator:a86fc16595788f9e950c5084ce28fec66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47cf01c8fc2ed09b2c0730da88ad5123"><td class="memItemLeft" align="right" valign="top">ros::Subscriber&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArucoTagProcessor.html#a47cf01c8fc2ed09b2c0730da88ad5123">_target_pose_sub</a></td></tr>
<tr class="memdesc:a47cf01c8fc2ed09b2c0730da88ad5123"><td class="mdescLeft">&#160;</td><td class="mdescRight">目标位姿订阅者，接收标记检测结果  <a href="classArucoTagProcessor.html#a47cf01c8fc2ed09b2c0730da88ad5123">More...</a><br /></td></tr>
<tr class="separator:a47cf01c8fc2ed09b2c0730da88ad5123"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe9687c74e84be3b1453b2307e52d6b2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structArucoTag.html">ArucoTag</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArucoTagProcessor.html#afe9687c74e84be3b1453b2307e52d6b2">_tag</a></td></tr>
<tr class="memdesc:afe9687c74e84be3b1453b2307e52d6b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">当前检测到的ArUco标记  <a href="classArucoTagProcessor.html#afe9687c74e84be3b1453b2307e52d6b2">More...</a><br /></td></tr>
<tr class="separator:afe9687c74e84be3b1453b2307e52d6b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9081bb8dc23f9741398b33ea1396b5d2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structTagConfig.html">TagConfig</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArucoTagProcessor.html#a9081bb8dc23f9741398b33ea1396b5d2">_tag_config</a></td></tr>
<tr class="memdesc:a9081bb8dc23f9741398b33ea1396b5d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">标记配置参数  <a href="classArucoTagProcessor.html#a9081bb8dc23f9741398b33ea1396b5d2">More...</a><br /></td></tr>
<tr class="separator:a9081bb8dc23f9741398b33ea1396b5d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43243ba5227576160aefb4bb70ac4610"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArucoTagProcessor.html#a43243ba5227576160aefb4bb70ac4610">_is_valid_now</a> = false</td></tr>
<tr class="memdesc:a43243ba5227576160aefb4bb70ac4610"><td class="mdescLeft">&#160;</td><td class="mdescRight">当前标记是否有效  <a href="classArucoTagProcessor.html#a43243ba5227576160aefb4bb70ac4610">More...</a><br /></td></tr>
<tr class="separator:a43243ba5227576160aefb4bb70ac4610"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4453e2cee4baaedd7121328929d5179"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArucoTagProcessor.html#ad4453e2cee4baaedd7121328929d5179">_was_previously_valid</a> = false</td></tr>
<tr class="memdesc:ad4453e2cee4baaedd7121328929d5179"><td class="mdescLeft">&#160;</td><td class="mdescRight">上一帧标记是否有效，用于检测状态变化  <a href="classArucoTagProcessor.html#ad4453e2cee4baaedd7121328929d5179">More...</a><br /></td></tr>
<tr class="separator:ad4453e2cee4baaedd7121328929d5179"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef7b4b750698d472443dad5cade1a6ea"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArucoTagProcessor.html#aef7b4b750698d472443dad5cade1a6ea">_align_timer</a> = 0</td></tr>
<tr class="memdesc:aef7b4b750698d472443dad5cade1a6ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">对准定时器，用于跟踪对准持续次数（mutable允许在const函数中修改）  <a href="classArucoTagProcessor.html#aef7b4b750698d472443dad5cade1a6ea">More...</a><br /></td></tr>
<tr class="separator:aef7b4b750698d472443dad5cade1a6ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af854973d2fc22f14e839a271be7bb965"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArucoTagProcessor.html#af854973d2fc22f14e839a271be7bb965">_filtered_yaw_error_deg</a> = 0.0</td></tr>
<tr class="memdesc:af854973d2fc22f14e839a271be7bb965"><td class="mdescLeft">&#160;</td><td class="mdescRight">过滤后的偏航角误差（度）  <a href="classArucoTagProcessor.html#af854973d2fc22f14e839a271be7bb965">More...</a><br /></td></tr>
<tr class="separator:af854973d2fc22f14e839a271be7bb965"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6514c51314c3cab0185d55b06813da29"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArucoTagProcessor.html#a6514c51314c3cab0185d55b06813da29">_filter_alpha</a> = 0.5</td></tr>
<tr class="memdesc:a6514c51314c3cab0185d55b06813da29"><td class="mdescLeft">&#160;</td><td class="mdescRight">过滤系数，用于平滑偏航角速度  <a href="classArucoTagProcessor.html#a6514c51314c3cab0185d55b06813da29">More...</a><br /></td></tr>
<tr class="separator:a6514c51314c3cab0185d55b06813da29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23fdeecdba02495187b74fe2b617f764"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArucoTagProcessor.html#a23fdeecdba02495187b74fe2b617f764">_is_started</a> = false</td></tr>
<tr class="memdesc:a23fdeecdba02495187b74fe2b617f764"><td class="mdescLeft">&#160;</td><td class="mdescRight">标记处理器是否已启动  <a href="classArucoTagProcessor.html#a23fdeecdba02495187b74fe2b617f764">More...</a><br /></td></tr>
<tr class="separator:a23fdeecdba02495187b74fe2b617f764"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>ArUco标记处理器类 </p>
<p>负责订阅和处理ArUco标记的位姿信息，计算标记的对准状态， 并生成相应的速度控制指令，用于无人机的精确着陆或其他视觉导航任务。 </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ab247bff9d180ac87924120c2e81e3d06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab247bff9d180ac87924120c2e81e3d06">&#9670;&nbsp;</a></span>ArucoTagProcessor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ArucoTagProcessor::ArucoTagProcessor </td>
          <td>(</td>
          <td class="paramtype">ros::NodeHandle &amp;&#160;</td>
          <td class="paramname"><em>nh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structTagConfig.html">TagConfig</a>&#160;</td>
          <td class="paramname"><em>tag_config</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>构造函数 </p>
<p>构造函数实现</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">nh</td><td>ROS节点句柄 </td></tr>
    <tr><td class="paramname">tag_config</td><td>标记配置参数</td></tr>
  </table>
  </dd>
</dl>
<p>初始化处理器，订阅标记检测话题</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">nh</td><td>ROS节点句柄 </td></tr>
    <tr><td class="paramname">tag_config</td><td>标记配置参数 </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classArucoTagProcessor_ab247bff9d180ac87924120c2e81e3d06_cgraph.png" border="0" usemap="#classArucoTagProcessor_ab247bff9d180ac87924120c2e81e3d06_cgraph" alt=""/></div>
<map name="classArucoTagProcessor_ab247bff9d180ac87924120c2e81e3d06_cgraph" id="classArucoTagProcessor_ab247bff9d180ac87924120c2e81e3d06_cgraph">
<area shape="rect" title="构造函数" alt="" coords="5,5,157,47"/>
<area shape="rect" href="classArucoTagProcessor.html#a07e1d1da2791953f47be1112c34635ec" title="目标位姿回调函数" alt="" coords="205,5,365,47"/>
<area shape="rect" href="classArucoTagProcessor.html#a6cf4cd546795956a614fbec97eb5a04b" title="将相机坐标系中的标记转换为机体坐标系" alt="" coords="413,5,565,47"/>
<area shape="rect" href="structArucoTag.html#a37ff20c8908e31b47f7835655713811d" title="检查标记数据是否有效" alt="" coords="613,13,752,39"/>
</map>
</div>

</div>
</div>
<a id="a584fafed502cd5fa21691c1cbcf11250"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a584fafed502cd5fa21691c1cbcf11250">&#9670;&nbsp;</a></span>~ArucoTagProcessor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ArucoTagProcessor::~ArucoTagProcessor </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>析构函数 </p>
<p>析构函数实现</p>
<p>使用默认析构函数，订阅者会自动清理 </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a06e20fde1499c5c3b8a767379190e71c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06e20fde1499c5c3b8a767379190e71c">&#9670;&nbsp;</a></span>calculate_velocity_command()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::array&lt; double, 4 &gt; ArucoTagProcessor::calculate_velocity_command </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_yaw</em> = <code>true</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>计算速度指令 </p>
<p>计算速度控制指令</p>
<p>基于当前标记位置和对准状态，计算无人机的速度控制指令</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">is_yaw</td><td>是否包含偏航控制，默认为true </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>std::array&lt;double,4&gt; 包含x,y,z,yaw速度指令的数组</dd></dl>
<p>使用P控制器根据标记位置误差计算速度指令，并应用速度限制</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">is_yaw</td><td>是否启用偏航控制 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>包含[vx, vy, vz, yaw_rate]的速度指令数组 </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classArucoTagProcessor_a06e20fde1499c5c3b8a767379190e71c_cgraph.png" border="0" usemap="#classArucoTagProcessor_a06e20fde1499c5c3b8a767379190e71c_cgraph" alt=""/></div>
<map name="classArucoTagProcessor_a06e20fde1499c5c3b8a767379190e71c_cgraph" id="classArucoTagProcessor_a06e20fde1499c5c3b8a767379190e71c_cgraph">
<area shape="rect" title="计算速度指令" alt="" coords="5,5,217,47"/>
<area shape="rect" href="classArucoTagProcessor.html#a90eb16f0f62b260877263c3af29dc531" title="计算偏航角速度指令" alt="" coords="265,5,417,47"/>
<area shape="rect" href="classArucoTagProcessor.html#aaf3d1fa5498ab780a8186adac557807d" title="获取偏航角误差（度）" alt="" coords="465,5,617,47"/>
<area shape="rect" href="utils_8h.html#a7c49671bd08b0ecb3cb52cbfb2063f08" title="将弧度转换为角度并归一化到[&#45;180, 180]范围" alt="" coords="665,13,820,39"/>
</map>
</div>

</div>
</div>
<a id="a90eb16f0f62b260877263c3af29dc531"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90eb16f0f62b260877263c3af29dc531">&#9670;&nbsp;</a></span>calculate_yaw_rate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double ArucoTagProcessor::calculate_yaw_rate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>计算偏航角速度指令 </p>
<p>根据当前偏航角误差，计算相应的偏航角速度控制指令</p>
<dl class="section return"><dt>Returns</dt><dd>double 偏航角速度指令（度/秒）</dd></dl>
<p>使用P控制器计算偏航角速度，并应用滤波和平滑处理，确保角速度在有效范围内</p>
<dl class="section return"><dt>Returns</dt><dd>偏航角速度指令（角度/秒） </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classArucoTagProcessor_a90eb16f0f62b260877263c3af29dc531_cgraph.png" border="0" usemap="#classArucoTagProcessor_a90eb16f0f62b260877263c3af29dc531_cgraph" alt=""/></div>
<map name="classArucoTagProcessor_a90eb16f0f62b260877263c3af29dc531_cgraph" id="classArucoTagProcessor_a90eb16f0f62b260877263c3af29dc531_cgraph">
<area shape="rect" title="计算偏航角速度指令" alt="" coords="5,5,157,47"/>
<area shape="rect" href="classArucoTagProcessor.html#aaf3d1fa5498ab780a8186adac557807d" title="获取偏航角误差（度）" alt="" coords="205,5,357,47"/>
<area shape="rect" href="utils_8h.html#a7c49671bd08b0ecb3cb52cbfb2063f08" title="将弧度转换为角度并归一化到[&#45;180, 180]范围" alt="" coords="405,13,560,39"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classArucoTagProcessor_a90eb16f0f62b260877263c3af29dc531_icgraph.png" border="0" usemap="#classArucoTagProcessor_a90eb16f0f62b260877263c3af29dc531_icgraph" alt=""/></div>
<map name="classArucoTagProcessor_a90eb16f0f62b260877263c3af29dc531_icgraph" id="classArucoTagProcessor_a90eb16f0f62b260877263c3af29dc531_icgraph">
<area shape="rect" title="计算偏航角速度指令" alt="" coords="265,5,417,47"/>
<area shape="rect" href="classArucoTagProcessor.html#a06e20fde1499c5c3b8a767379190e71c" title="计算速度指令" alt="" coords="5,5,217,47"/>
</map>
</div>

</div>
</div>
<a id="abe7deb02d9d29837747d9a4e5349e216"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe7deb02d9d29837747d9a4e5349e216">&#9670;&nbsp;</a></span>check_distance_valid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ArucoTagProcessor::check_distance_valid </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>检查标记与目标的距离是否有效 </p>
<p>检查标记与目标的距离是否在有效范围内</p>
<p>判断标记是否在配置的最大检测距离范围内</p>
<dl class="section return"><dt>Returns</dt><dd>true 如果距离有效 </dd>
<dd>
false 如果距离无效</dd></dl>
<p>验证标记在X、Y、Z轴上的距离是否小于配置的最大检测距离</p>
<dl class="section return"><dt>Returns</dt><dd>如果距离有效返回true，否则返回false </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classArucoTagProcessor_abe7deb02d9d29837747d9a4e5349e216_cgraph.png" border="0" usemap="#classArucoTagProcessor_abe7deb02d9d29837747d9a4e5349e216_cgraph" alt=""/></div>
<map name="classArucoTagProcessor_abe7deb02d9d29837747d9a4e5349e216_cgraph" id="classArucoTagProcessor_abe7deb02d9d29837747d9a4e5349e216_cgraph">
<area shape="rect" title="检查标记与目标的距离是否有效" alt="" coords="5,35,167,76"/>
<area shape="rect" href="classArucoTagProcessor.html#ab460550439913f709e8673cad3e0d127" title="检查标记是否超时" alt="" coords="215,5,367,47"/>
<area shape="rect" href="structArucoTag.html#a37ff20c8908e31b47f7835655713811d" title="检查标记数据是否有效" alt="" coords="221,71,360,98"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classArucoTagProcessor_abe7deb02d9d29837747d9a4e5349e216_icgraph.png" border="0" usemap="#classArucoTagProcessor_abe7deb02d9d29837747d9a4e5349e216_icgraph" alt=""/></div>
<map name="classArucoTagProcessor_abe7deb02d9d29837747d9a4e5349e216_icgraph" id="classArucoTagProcessor_abe7deb02d9d29837747d9a4e5349e216_icgraph">
<area shape="rect" title="检查标记与目标的距离是否有效" alt="" coords="235,5,396,47"/>
<area shape="rect" href="classArucoTagProcessor.html#a08383d557a51c32c36fcf05b2038f10a" title="更新并记录标记有效性" alt="" coords="5,5,187,47"/>
</map>
</div>

</div>
</div>
<a id="ab460550439913f709e8673cad3e0d127"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab460550439913f709e8673cad3e0d127">&#9670;&nbsp;</a></span>check_tag_timeout()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ArucoTagProcessor::check_tag_timeout </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>检查标记是否超时 </p>
<p>判断从上次有效检测到现在的时间是否超过配置的超时时间</p>
<dl class="section return"><dt>Returns</dt><dd>true 如果标记已超时 </dd>
<dd>
false 如果标记未超时</dd></dl>
<p>比较当前时间与标记时间戳，判断标记数据是否过期</p>
<dl class="section return"><dt>Returns</dt><dd>如果标记超时返回true，否则返回false </dd></dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classArucoTagProcessor_ab460550439913f709e8673cad3e0d127_icgraph.png" border="0" usemap="#classArucoTagProcessor_ab460550439913f709e8673cad3e0d127_icgraph" alt=""/></div>
<map name="classArucoTagProcessor_ab460550439913f709e8673cad3e0d127_icgraph" id="classArucoTagProcessor_ab460550439913f709e8673cad3e0d127_icgraph">
<area shape="rect" title="检查标记是否超时" alt="" coords="444,35,596,76"/>
<area shape="rect" href="classArucoTagProcessor.html#abe7deb02d9d29837747d9a4e5349e216" title="检查标记与目标的距离是否有效" alt="" coords="235,5,396,47"/>
<area shape="rect" href="classArucoTagProcessor.html#a08383d557a51c32c36fcf05b2038f10a" title="更新并记录标记有效性" alt="" coords="5,35,187,76"/>
</map>
</div>

</div>
</div>
<a id="a1e39474344ea5589188d750b5e24a78a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e39474344ea5589188d750b5e24a78a">&#9670;&nbsp;</a></span>get_alignment_errors()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::array&lt; double, 4 &gt; ArucoTagProcessor::get_alignment_errors </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>获取对齐误差向量 </p>
<p>获取标记对齐误差</p>
<p>返回在x, y, z轴和偏航角上的对准误差</p>
<dl class="section return"><dt>Returns</dt><dd>std::array&lt;double,4&gt; 包含x,y,z,yaw误差的数组</dd></dl>
<p>计算标记在X、Y、Z轴上的位置误差以及偏航角误差</p>
<dl class="section return"><dt>Returns</dt><dd>包含[x_error, y_error, z_error, yaw_error_deg]的数组 </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::runtime_error</td><td>如果标记无效 </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classArucoTagProcessor_a1e39474344ea5589188d750b5e24a78a_cgraph.png" border="0" usemap="#classArucoTagProcessor_a1e39474344ea5589188d750b5e24a78a_cgraph" alt=""/></div>
<map name="classArucoTagProcessor_a1e39474344ea5589188d750b5e24a78a_cgraph" id="classArucoTagProcessor_a1e39474344ea5589188d750b5e24a78a_cgraph">
<area shape="rect" title="获取对齐误差向量" alt="" coords="5,5,167,47"/>
<area shape="rect" href="classArucoTagProcessor.html#aaf3d1fa5498ab780a8186adac557807d" title="获取偏航角误差（度）" alt="" coords="215,5,367,47"/>
<area shape="rect" href="utils_8h.html#a7c49671bd08b0ecb3cb52cbfb2063f08" title="将弧度转换为角度并归一化到[&#45;180, 180]范围" alt="" coords="415,13,569,39"/>
</map>
</div>

</div>
</div>
<a id="a6cf4cd546795956a614fbec97eb5a04b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cf4cd546795956a614fbec97eb5a04b">&#9670;&nbsp;</a></span>get_tag_body()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structArucoTag.html">ArucoTag</a> ArucoTagProcessor::get_tag_body </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structArucoTag.html">ArucoTag</a> &amp;&#160;</td>
          <td class="paramname"><em>tag_cam</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>将相机坐标系中的标记转换为机体坐标系 </p>
<p>将相机坐标系下的标记位姿转换为机身坐标系</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tag_cam</td><td>相机坐标系中的标记 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="structArucoTag.html" title="ArUco标记结构体">ArucoTag</a> 转换到机体坐标系后的标记</dd></dl>
<p>应用配置中定义的旋转矩阵进行坐标系转换</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tag_cam</td><td>相机坐标系下的标记位姿 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>机身坐标系下的标记位姿 </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classArucoTagProcessor_a6cf4cd546795956a614fbec97eb5a04b_cgraph.png" border="0" usemap="#classArucoTagProcessor_a6cf4cd546795956a614fbec97eb5a04b_cgraph" alt=""/></div>
<map name="classArucoTagProcessor_a6cf4cd546795956a614fbec97eb5a04b_cgraph" id="classArucoTagProcessor_a6cf4cd546795956a614fbec97eb5a04b_cgraph">
<area shape="rect" title="将相机坐标系中的标记转换为机体坐标系" alt="" coords="5,5,157,47"/>
<area shape="rect" href="structArucoTag.html#a37ff20c8908e31b47f7835655713811d" title="检查标记数据是否有效" alt="" coords="205,13,344,39"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classArucoTagProcessor_a6cf4cd546795956a614fbec97eb5a04b_icgraph.png" border="0" usemap="#classArucoTagProcessor_a6cf4cd546795956a614fbec97eb5a04b_icgraph" alt=""/></div>
<map name="classArucoTagProcessor_a6cf4cd546795956a614fbec97eb5a04b_icgraph" id="classArucoTagProcessor_a6cf4cd546795956a614fbec97eb5a04b_icgraph">
<area shape="rect" title="将相机坐标系中的标记转换为机体坐标系" alt="" coords="413,5,565,47"/>
<area shape="rect" href="classArucoTagProcessor.html#a07e1d1da2791953f47be1112c34635ec" title="目标位姿回调函数" alt="" coords="205,5,365,47"/>
<area shape="rect" href="classArucoTagProcessor.html#ab247bff9d180ac87924120c2e81e3d06" title="构造函数" alt="" coords="5,5,157,47"/>
</map>
</div>

</div>
</div>
<a id="aaf3d1fa5498ab780a8186adac557807d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf3d1fa5498ab780a8186adac557807d">&#9670;&nbsp;</a></span>get_yaw_error_deg()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double ArucoTagProcessor::get_yaw_error_deg </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>获取偏航角误差（度） </p>
<p>获取偏航角误差（角度）</p>
<p>计算当前偏航角与目标偏航角的误差</p>
<dl class="section return"><dt>Returns</dt><dd>double 偏航角误差（度）</dd></dl>
<p>根据标记的朝向计算相对于期望方向的偏航角误差</p>
<dl class="section return"><dt>Returns</dt><dd>偏航角误差（角度制） </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classArucoTagProcessor_aaf3d1fa5498ab780a8186adac557807d_cgraph.png" border="0" usemap="#classArucoTagProcessor_aaf3d1fa5498ab780a8186adac557807d_cgraph" alt=""/></div>
<map name="classArucoTagProcessor_aaf3d1fa5498ab780a8186adac557807d_cgraph" id="classArucoTagProcessor_aaf3d1fa5498ab780a8186adac557807d_cgraph">
<area shape="rect" title="获取偏航角误差（度）" alt="" coords="5,5,157,47"/>
<area shape="rect" href="utils_8h.html#a7c49671bd08b0ecb3cb52cbfb2063f08" title="将弧度转换为角度并归一化到[&#45;180, 180]范围" alt="" coords="205,13,360,39"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classArucoTagProcessor_aaf3d1fa5498ab780a8186adac557807d_icgraph.png" border="0" usemap="#classArucoTagProcessor_aaf3d1fa5498ab780a8186adac557807d_icgraph" alt=""/></div>
<map name="classArucoTagProcessor_aaf3d1fa5498ab780a8186adac557807d_icgraph" id="classArucoTagProcessor_aaf3d1fa5498ab780a8186adac557807d_icgraph">
<area shape="rect" title="获取偏航角误差（度）" alt="" coords="475,39,627,80"/>
<area shape="rect" href="classArucoTagProcessor.html#a90eb16f0f62b260877263c3af29dc531" title="计算偏航角速度指令" alt="" coords="270,5,422,47"/>
<area shape="rect" href="classArucoTagProcessor.html#a1e39474344ea5589188d750b5e24a78a" title="获取对齐误差向量" alt="" coords="265,71,427,112"/>
<area shape="rect" href="classArucoTagProcessor.html#a06e20fde1499c5c3b8a767379190e71c" title="计算速度指令" alt="" coords="5,5,217,47"/>
</map>
</div>

</div>
</div>
<a id="adcc21c5619797a337d1f70290d1e506f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcc21c5619797a337d1f70290d1e506f">&#9670;&nbsp;</a></span>is_aligned()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ArucoTagProcessor::is_aligned </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>检查标记是否已对准 </p>
<p>检查标记是否已对齐</p>
<p>判断无人机是否已经对准到标记的允许误差范围内</p>
<dl class="section return"><dt>Returns</dt><dd>true 如果已对准 </dd>
<dd>
false 如果未对准</dd></dl>
<p>根据配置的对齐轴和容差，判断标记是否在期望的位置范围内，并使用计时器确保持续对齐</p>
<dl class="section return"><dt>Returns</dt><dd>如果标记持续对齐返回true，否则返回false </dd></dl>

</div>
</div>
<a id="a54b70e6de83233fd0a85fe5256c440a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54b70e6de83233fd0a85fe5256c440a6">&#9670;&nbsp;</a></span>is_valid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ArucoTagProcessor::is_valid </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>检查标记是否有效 </p>
<dl class="section return"><dt>Returns</dt><dd>true 如果标记当前有效 </dd>
<dd>
false 如果标记当前无效 </dd></dl>

</div>
</div>
<a id="a2e6c730d582983b6674945b6cecce1f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e6c730d582983b6674945b6cecce1f7">&#9670;&nbsp;</a></span>set_start()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ArucoTagProcessor::set_start </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>started</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>设置处理器启动状态 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">started</td><td>启动状态 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a07e1d1da2791953f47be1112c34635ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07e1d1da2791953f47be1112c34635ec">&#9670;&nbsp;</a></span>target_pose_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ArucoTagProcessor::target_pose_callback </td>
          <td>(</td>
          <td class="paramtype">const geometry_msgs::PoseStamped::ConstPtr &amp;&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>目标位姿回调函数 </p>
<p>处理接收到的目标位姿消息，更新标记数据</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>位姿消息指针</td></tr>
  </table>
  </dd>
</dl>
<p>处理从相机接收到的标记位姿信息，将其转换为机身坐标系</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>包含标记位姿的ROS消息 </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classArucoTagProcessor_a07e1d1da2791953f47be1112c34635ec_cgraph.png" border="0" usemap="#classArucoTagProcessor_a07e1d1da2791953f47be1112c34635ec_cgraph" alt=""/></div>
<map name="classArucoTagProcessor_a07e1d1da2791953f47be1112c34635ec_cgraph" id="classArucoTagProcessor_a07e1d1da2791953f47be1112c34635ec_cgraph">
<area shape="rect" title="目标位姿回调函数" alt="" coords="5,5,165,47"/>
<area shape="rect" href="classArucoTagProcessor.html#a6cf4cd546795956a614fbec97eb5a04b" title="将相机坐标系中的标记转换为机体坐标系" alt="" coords="213,5,365,47"/>
<area shape="rect" href="structArucoTag.html#a37ff20c8908e31b47f7835655713811d" title="检查标记数据是否有效" alt="" coords="413,13,552,39"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classArucoTagProcessor_a07e1d1da2791953f47be1112c34635ec_icgraph.png" border="0" usemap="#classArucoTagProcessor_a07e1d1da2791953f47be1112c34635ec_icgraph" alt=""/></div>
<map name="classArucoTagProcessor_a07e1d1da2791953f47be1112c34635ec_icgraph" id="classArucoTagProcessor_a07e1d1da2791953f47be1112c34635ec_icgraph">
<area shape="rect" title="目标位姿回调函数" alt="" coords="205,5,365,47"/>
<area shape="rect" href="classArucoTagProcessor.html#ab247bff9d180ac87924120c2e81e3d06" title="构造函数" alt="" coords="5,5,157,47"/>
</map>
</div>

</div>
</div>
<a id="a08383d557a51c32c36fcf05b2038f10a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08383d557a51c32c36fcf05b2038f10a">&#9670;&nbsp;</a></span>update_and_log_validity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ArucoTagProcessor::update_and_log_validity </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>更新并记录标记有效性 </p>
<p>更新标记有效性状态并记录日志</p>
<p>检查标记是否超时，更新当前有效性状态，并记录变化</p>
<p>检查标记是否有效、是否超时、距离是否有效，并在状态变化时记录ROS日志 </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classArucoTagProcessor_a08383d557a51c32c36fcf05b2038f10a_cgraph.png" border="0" usemap="#classArucoTagProcessor_a08383d557a51c32c36fcf05b2038f10a_cgraph" alt=""/></div>
<map name="classArucoTagProcessor_a08383d557a51c32c36fcf05b2038f10a_cgraph" id="classArucoTagProcessor_a08383d557a51c32c36fcf05b2038f10a_cgraph">
<area shape="rect" title="更新并记录标记有效性" alt="" coords="5,49,187,91"/>
<area shape="rect" href="classArucoTagProcessor.html#abe7deb02d9d29837747d9a4e5349e216" title="检查标记与目标的距离是否有效" alt="" coords="235,49,396,91"/>
<area shape="rect" href="classArucoTagProcessor.html#ab460550439913f709e8673cad3e0d127" title="检查标记是否超时" alt="" coords="444,5,596,47"/>
<area shape="rect" href="structArucoTag.html#a37ff20c8908e31b47f7835655713811d" title="检查标记数据是否有效" alt="" coords="451,86,589,113"/>
</map>
</div>

</div>
</div>
<a id="a4a9fde3188baf0caa7ec72ffc3bf3443"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a9fde3188baf0caa7ec72ffc3bf3443">&#9670;&nbsp;</a></span>update_tag_started()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ArucoTagProcessor::update_tag_started </td>
          <td>(</td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>started</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>更新标记启动状态 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">started</td><td>启动状态 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae28e867f42494a6d8a2e3cd18a8f83ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae28e867f42494a6d8a2e3cd18a8f83ad">&#9670;&nbsp;</a></span>update_tagconfig()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ArucoTagProcessor::update_tagconfig </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structTagConfig.html">TagConfig</a>&#160;</td>
          <td class="paramname"><em>config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>更新标记配置 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">config</td><td>新的标记配置 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="aef7b4b750698d472443dad5cade1a6ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef7b4b750698d472443dad5cade1a6ea">&#9670;&nbsp;</a></span>_align_timer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ArucoTagProcessor::_align_timer = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>对准定时器，用于跟踪对准持续次数（mutable允许在const函数中修改） </p>

</div>
</div>
<a id="a6514c51314c3cab0185d55b06813da29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6514c51314c3cab0185d55b06813da29">&#9670;&nbsp;</a></span>_filter_alpha</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double ArucoTagProcessor::_filter_alpha = 0.5</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>过滤系数，用于平滑偏航角速度 </p>

</div>
</div>
<a id="af854973d2fc22f14e839a271be7bb965"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af854973d2fc22f14e839a271be7bb965">&#9670;&nbsp;</a></span>_filtered_yaw_error_deg</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double ArucoTagProcessor::_filtered_yaw_error_deg = 0.0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>过滤后的偏航角误差（度） </p>

</div>
</div>
<a id="a23fdeecdba02495187b74fe2b617f764"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23fdeecdba02495187b74fe2b617f764">&#9670;&nbsp;</a></span>_is_started</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ArucoTagProcessor::_is_started = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>标记处理器是否已启动 </p>

</div>
</div>
<a id="a43243ba5227576160aefb4bb70ac4610"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43243ba5227576160aefb4bb70ac4610">&#9670;&nbsp;</a></span>_is_valid_now</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ArucoTagProcessor::_is_valid_now = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>当前标记是否有效 </p>

</div>
</div>
<a id="a86fc16595788f9e950c5084ce28fec66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86fc16595788f9e950c5084ce28fec66">&#9670;&nbsp;</a></span>_nh</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ros::NodeHandle ArucoTagProcessor::_nh</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>ROS节点句柄 </p>

</div>
</div>
<a id="afe9687c74e84be3b1453b2307e52d6b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe9687c74e84be3b1453b2307e52d6b2">&#9670;&nbsp;</a></span>_tag</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structArucoTag.html">ArucoTag</a> ArucoTagProcessor::_tag</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>当前检测到的ArUco标记 </p>

</div>
</div>
<a id="a9081bb8dc23f9741398b33ea1396b5d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9081bb8dc23f9741398b33ea1396b5d2">&#9670;&nbsp;</a></span>_tag_config</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structTagConfig.html">TagConfig</a> ArucoTagProcessor::_tag_config</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>标记配置参数 </p>

</div>
</div>
<a id="a47cf01c8fc2ed09b2c0730da88ad5123"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47cf01c8fc2ed09b2c0730da88ad5123">&#9670;&nbsp;</a></span>_target_pose_sub</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ros::Subscriber ArucoTagProcessor::_target_pose_sub</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>目标位姿订阅者，接收标记检测结果 </p>

</div>
</div>
<a id="ad4453e2cee4baaedd7121328929d5179"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4453e2cee4baaedd7121328929d5179">&#9670;&nbsp;</a></span>_was_previously_valid</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ArucoTagProcessor::_was_previously_valid = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>上一帧标记是否有效，用于检测状态变化 </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/Tag/<a class="el" href="ArucoTagProcessor_8h_source.html">ArucoTagProcessor.h</a></li>
<li>src/Tag/<a class="el" href="ArucoTagProcessor_8cpp.html">ArucoTagProcessor.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
